<!DOCTYPE HTML>
<html lang="zh-CN">


<head>
    <meta charset="utf-8">
    <meta name="keywords" content="MySQL, wb">
    <meta name="description" content="SQL语言是操作关系型数据库的统一标准。">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta name="renderer" content="webkit|ie-stand|ie-comp">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="format-detection" content="telephone=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="referrer" content="no-referrer-when-downgrade">
    <!-- Global site tag (gtag.js) - Google Analytics -->


    <title>MySQL | wb</title>
    <link rel="icon" type="image/png" href="/favicon.png">

    <link rel="stylesheet" type="text/css" href="/libs/awesome/css/all.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/materialize/materialize.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/aos/aos.css">
    <link rel="stylesheet" type="text/css" href="/libs/animate/animate.min.css">
    <link rel="stylesheet" type="text/css" href="/libs/lightGallery/css/lightgallery.min.css">
    <link rel="stylesheet" type="text/css" href="/css/matery.css">
    <link rel="stylesheet" type="text/css" href="/css/my.css">

    <script src="/libs/jquery/jquery-3.6.0.min.js"></script>

<meta name="generator" content="Hexo 6.1.0"><link rel="alternate" href="/atom.xml" title="wb" type="application/atom+xml">

<style>.github-emoji { position: relative; display: inline-block; width: 1.2em; min-height: 1.2em; overflow: hidden; vertical-align: top; color: transparent; }  .github-emoji > span { position: relative; z-index: 10; }  .github-emoji img, .github-emoji .fancybox { margin: 0 !important; padding: 0 !important; border: none !important; outline: none !important; text-decoration: none !important; user-select: none !important; cursor: auto !important; }  .github-emoji img { height: 1.2em !important; width: 1.2em !important; position: absolute !important; left: 50% !important; top: 50% !important; transform: translate(-50%, -50%) !important; user-select: none !important; cursor: auto !important; } .github-emoji-fallback { color: inherit; } .github-emoji-fallback img { opacity: 0 !important; }</style>
</head>




<body>
    <header class="navbar-fixed">
    <nav id="headNav" class="bg-color nav-transparent">
        <div id="navContainer" class="nav-wrapper container">
            <div class="brand-logo">
                <a href="/" class="waves-effect waves-light">
                    
                    <img src="/medias/logo.png" class="logo-img" alt="LOGO">
                    
                    <span class="logo-span">wb</span>
                </a>
            </div>
            

<a href="#" data-target="mobile-nav" class="sidenav-trigger button-collapse"><i class="fas fa-bars"></i></a>
<ul class="right nav-menu">
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/" class="waves-effect waves-light">
      
      <i class="fas fa-home" style="zoom: 0.6;"></i>
      
      <span>首页</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/tags" class="waves-effect waves-light">
      
      <i class="fas fa-tags" style="zoom: 0.6;"></i>
      
      <span>标签</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/categories" class="waves-effect waves-light">
      
      <i class="fas fa-bookmark" style="zoom: 0.6;"></i>
      
      <span>分类</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/archives" class="waves-effect waves-light">
      
      <i class="fas fa-archive" style="zoom: 0.6;"></i>
      
      <span>归档</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/about" class="waves-effect waves-light">
      
      <i class="fas fa-user-circle" style="zoom: 0.6;"></i>
      
      <span>关于</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/contact" class="waves-effect waves-light">
      
      <i class="fas fa-comments" style="zoom: 0.6;"></i>
      
      <span>留言板</span>
    </a>
    
  </li>
  
  <li class="hide-on-med-and-down nav-item">
    
    <a href="/friends" class="waves-effect waves-light">
      
      <i class="fas fa-address-book" style="zoom: 0.6;"></i>
      
      <span>友情链接</span>
    </a>
    
  </li>
  
  <li>
    <a href="#searchModal" class="modal-trigger waves-effect waves-light">
      <i id="searchIcon" class="fas fa-search" title="搜索" style="zoom: 0.85;"></i>
    </a>
  </li>
</ul>


<div id="mobile-nav" class="side-nav sidenav">

    <div class="mobile-head bg-color">
        
        <img src="/medias/logo.png" class="logo-img circle responsive-img">
        
        <div class="logo-name">wb</div>
        <div class="logo-desc">
            
            Never really desperate, only the lost of the soul.
            
        </div>
    </div>

    <ul class="menu-list mobile-menu-list">
        
        <li class="m-nav-item">
	  
		<a href="/" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-home"></i>
			
			首页
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/tags" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-tags"></i>
			
			标签
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/categories" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-bookmark"></i>
			
			分类
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/archives" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-archive"></i>
			
			归档
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/about" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-user-circle"></i>
			
			关于
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/contact" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-comments"></i>
			
			留言板
		</a>
          
        </li>
        
        <li class="m-nav-item">
	  
		<a href="/friends" class="waves-effect waves-light">
			
			    <i class="fa-fw fas fa-address-book"></i>
			
			友情链接
		</a>
          
        </li>
        
        
    </ul>
</div>


        </div>

        
    </nav>

</header>

    



<div class="bg-cover pd-header post-cover" style="background-image: url('/images/6.jpg')">
    <div class="container" style="right: 0px;left: 0px;">
        <div class="row">
            <div class="col s12 m12 l12">
                <div class="brand">
                    <h1 class="description center-align post-title">MySQL</h1>
                </div>
            </div>
        </div>
    </div>
</div>




<main class="container content">

    
    <!-- 文章内容详情 -->
<div id="artDetail">
    <div class="card">
        <div class="card-content article-info">
            <div class="row tag-cate">
                <div class="col s7">
                    
                    <div class="article-tag">
                        
                            <a href="/tags/MySQL/">
                                <span class="chip bg-color">MySQL</span>
                            </a>
                        
                    </div>
                    
                </div>
                <div class="col s5 right-align">
                    
                    <div class="post-cate">
                        <i class="fas fa-bookmark fa-fw icon-category"></i>
                        
                            <a href="/categories/MySQL/" class="post-category">
                                MySQL
                            </a>
                        
                    </div>
                    
                </div>
            </div>

            <div class="post-info">
                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-minus fa-fw"></i>发布日期:&nbsp;&nbsp;
                    2021-05-30
                </div>
                

                
                <div class="post-date info-break-policy">
                    <i class="far fa-calendar-check fa-fw"></i>更新日期:&nbsp;&nbsp;
                    2022-03-31
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-file-word fa-fw"></i>文章字数:&nbsp;&nbsp;
                    12.2k
                </div>
                

                
                <div class="info-break-policy">
                    <i class="far fa-clock fa-fw"></i>阅读时长:&nbsp;&nbsp;
                    45 分
                </div>
                

                
                    <div id="busuanzi_container_page_pv" class="info-break-policy">
                        <i class="far fa-eye fa-fw"></i>阅读次数:&nbsp;&nbsp;
                        <span id="busuanzi_value_page_pv"></span>
                    </div>
				
            </div>
        </div>
        <hr class="clearfix">

        
        <!-- 是否加载使用自带的 prismjs. -->
        <link rel="stylesheet" href="/libs/prism/prism.css">
        

        

        <div class="card-content article-card-content">
            <div id="articleContent">
                <h1 id="1-MySQL概述"><a href="#1-MySQL概述" class="headerlink" title="1. MySQL概述"></a>1. MySQL概述</h1><p>在这一章节，我们主要介绍两个部分，数据库相关概念及MySQL数据库的介绍。下载、安装、启动及连<br>接。</p>
<h2 id="1-1-数据库相关概念"><a href="#1-1-数据库相关概念" class="headerlink" title="1.1 数据库相关概念"></a>1.1 数据库相关概念</h2><p>在这一部分，我们先来讲解三个概念：数据库、数据库管理系统、SQL。</p>
<pre class="line-numbers language-none"><code class="language-none">名称             全称                                                    简称
数据库存         储数据的仓库，数据是有组织的进行存储                         DataBase（DB）
数据库管理系统    操纵和管理数据库的大型软件                                  DataBase ManagementSystem (DBMS)
SQL             操作关系型数据库的编程语言，定义了一套操作关系型数据库统一标准   Structured QueryLanguage (SQL)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<p><img src="/images/MySQL-%E9%93%BE%E6%8E%A5%E5%9B%BE.jpg" alt="MySQL-链接图"><br>而目前主流的关系型数据库管理系统的市场占有率排名如下：<br><img src="/images/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AE%A1%E7%90%86%E7%B3%BB%E7%BB%9F.jpg" alt="数据库管理系统"><br>Oracle：大型的收费数据库，Oracle公司产品，价格昂贵。<br>MySQL：开源免费的中小型数据库，后来Sun公司收购了MySQL，而Oracle又收购了Sun公司。目前Oracle推出了收费版本的MySQL，也提供了免费的社区版本。<br>SQL Server：Microsoft 公司推出的收费的中型数据库，C#、.net等语言常用。<br>PostgreSQL：开源免费的中小型数据库。<br>DB2：IBM公司的大型收费数据库产品。<br>SQLLite：嵌入式的微型数据库。Android内置的数据库采用的就是该数据库。<br>MariaDB：开源免费的中小型数据库。是MySQL数据库的另外一个分支、另外一个衍生产品，与<br>MySQL数据库有很好的兼容性。</p>
<p>而不论我们使用的是上面的哪一个关系型数据库，最终在操作时，都是使用SQL语言来进行统一操作，因为我们前面讲到SQL语言，是操作关系型数据库的统一标准。所以即使我们现在学习的是MySQL，假如我们以后到了公司，使用的是别的关系型数据库，如：Oracle、DB2、SQLServer，也完全不用担心，因为操作的方式都是一致的。</p>
<h2 id="1-2-MySQL数据库"><a href="#1-2-MySQL数据库" class="headerlink" title="1.2 MySQL数据库"></a>1.2 MySQL数据库</h2><h3 id="1-2-1-版本"><a href="#1-2-1-版本" class="headerlink" title="1.2.1 版本"></a>1.2.1 版本</h3><p>本课程采用的是MySQL最新的社区版-MySQL Community Server 8.0.26</p>
<h3 id="1-2-2-下载"><a href="#1-2-2-下载" class="headerlink" title="1.2.2 下载"></a>1.2.2 下载</h3><p>下载地址： <a target="_blank" rel="noopener" href="https://downloads.mysql.com/archives/installer/">https://downloads.mysql.com/archives/installer/</a></p>
<h3 id="1-2-3-安装"><a href="#1-2-3-安装" class="headerlink" title="1.2.3 安装"></a>1.2.3 安装</h3><p>要想使用MySQL，我们首先先得将MySQL安装好，我们可以根据下面的步骤，一步一步的完成MySQL的<br>安装。<br>1). 双击官方下来的安装包文件<br>2). 根据安装提示进行安装<br>安装MySQL的相关组件，这个过程可能需要耗时几分钟，耐心等待<br>输入MySQL中root用户的密码,一定记得记住该密码<br><img src="/images/MySQL%E5%AE%89%E8%A3%85.jpg" alt="MySQL安装"></p>
<p><img src="/images/MySQL%E7%B3%BB%E7%BB%9F%E6%9C%8D%E5%8A%A1%E5%90%8D.jpg" alt="MySQL系统服务名"><br>3). 配置<br>安装好MySQL之后，还需要配置环境变量，这样才可以在任何目录下连接MySQL。<br>A. 在此电脑上，右键选择属性<br>B. 点击左侧的 “高级系统设置”，选择环境变量<br>C. 找到 Path 系统变量, 点击 “编辑”<br>D. 选择 “新建” , 将MySQL Server的安装目录下的bin目录添加到环境变量<br>1.2.4 启动停止<br>MySQL安装完成之后，在系统启动时，会自动启动MySQL服务，我们无需手动启动了。<br>当然，也可以手动的通过指令启动停止，以管理员身份运行cmd，进入命令行执行如下指</p>
<pre class="line-numbers language-mysql" data-language="mysql"><code class="language-mysql">net start mysql80
net stop mysql80<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p><img src="/images/MySQL%E9%BB%98%E8%AE%A4%E9%85%8D%E7%BD%AE%E7%B3%BB%E7%BB%9F%E5%90%8D%E7%A7%B0.jpg" alt="MySQL默认配置系统名称"><br>注意 ： 上述的 mysql80 是我们在安装MySQL时，默认指定的mysql的系统服务名，不是固<br>定的，如果未改动，默认就是mysql80。</p>
<p>1.2.5 客户端连接<br>1). 方式一：使用MySQL提供的客户端命令行工具<br>2). 方式二：使用系统自带的命令行工具执行指令</p>
<pre class="line-numbers language-none"><code class="language-none">mysql [-h 127.0.0.1] [-P 3306] -u root -p
参数：
-h : MySQL服务所在的主机IP
-P : MySQL服务端口号， 默认3306
-u : MySQL数据库用户名
-p ： MySQL数据库用户名对应的密码<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>[]内为可选参数，如果需要连接远程的MySQL，需要加上这两个参数来指定远程主机IP、端口，如果<br>连接本地的MySQL，则无需指定这两个参数。<br><img src="/images/MySQL%E9%93%BE%E6%8E%A5.jpg" alt="MySQL链接"><br>注意： 使用这种方式进行连接时，需要安装完毕后配置PATH环境变量。</p>
<h3 id="1-2-6-数据模型"><a href="#1-2-6-数据模型" class="headerlink" title="1.2.6 数据模型"></a>1.2.6 数据模型</h3><p>1). 关系型数据库（RDBMS）<br>概念：建立在关系模型基础上，由多张相互连接的二维表组成的数据库。<br>而所谓二维表，指的是由行和列组成的表，如下图（就类似于Excel表格数据，有表头、有列、有行，<br>还可以通过一列关联另外一个表格中的某一列数据）。我们之前提到的MySQL、Oracle、DB2、<br>SQLServer这些都是属于关系型数据库，里面都是基于二维表存储数据的。简单说，基于二维表存储<br>数据的数据库就成为关系型数据库，不是基于二维表存储数据的数据库，就是非关系型数据库。<br><img src="/images/%E5%85%B3%E7%B3%BB%E5%9E%8B%E6%95%B0%E6%8D%AE%E5%BA%93.jpg" alt="关系型数据库"><br>特点：<br>A. 使用表存储数据，格式统一，便于维护。<br>B. 使用SQL语言操作，标准统一，使用方便。</p>
<p>2). 数据模型<br>MySQL是关系型数据库，是基于二维表进行数据存储的，具体的结构图下:<br><img src="/images/%E6%95%B0%E6%8D%AE%E5%BA%93%E6%9C%8D%E5%8A%A1%E5%99%A8.jpg" alt="数据库服务器"><br>我们可以通过MySQL客户端连接数据库管理系统DBMS，然后通过DBMS操作数据库。<br>可以使用SQL语句，通过数据库管理系统操作数据库，以及操作数据库中的表结构及数据。<br>一个数据库服务器中可以创建多个数据库，一个数据库中也可以包含多张表，而一张表中又可以包<br>含多行记录。</p>
<h1 id="2-SQL"><a href="#2-SQL" class="headerlink" title="2. SQL"></a>2. SQL</h1><p>全称 Structured Query Language，结构化查询语言。操作关系型数据库的编程语言，定义了<br>一套操作关系型数据库统一标准 。</p>
<h2 id="2-1-SQL通用语法"><a href="#2-1-SQL通用语法" class="headerlink" title="2.1 SQL通用语法"></a>2.1 SQL通用语法</h2><p>在学习具体的SQL语句之前，先来了解一下SQL语言的同于语法。<br>1). SQL语句可以单行或多行书写，以分号结尾。<br>2). SQL语句可以使用空格/缩进来增强语句的可读性。<br>3). MySQL数据库的SQL语句不区分大小写，关键字建议使用大写。<br>4). 注释：<br>单行注释：– 注释内容 或 # 注释内容<br>多行注释：/* 注释内容 */</p>
<h2 id="2-2-SQL分类"><a href="#2-2-SQL分类" class="headerlink" title="2.2 SQL分类"></a>2.2 SQL分类</h2><p>SQL语句，根据其功能，主要分为四类：DDL、DML、DQL、DCL。</p>
<pre class="line-numbers language-none"><code class="language-none">分类   全称                       说明
DDL   Data DefinitionLanguage    数据定义语言，用来定义数据库对象(数据库，表，字段)
DML   Data ManipulationLanguage  数据操作语言，用来对数据库表中的数据进行增删改
DQL   Data Query Language        数据查询语言，用来查询数据库中表的记录
DCL   Data Control Language      数据控制语<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="2-3-DDL"><a href="#2-3-DDL" class="headerlink" title="2.3 DDL"></a>2.3 DDL</h2><p>Data Definition Language，数据定义语言，用来定义数据库对象(数据库，表，字段) 。</p>
<h3 id="2-3-1-数据库操作"><a href="#2-3-1-数据库操作" class="headerlink" title="2.3.1 数据库操作"></a>2.3.1 数据库操作</h3><p>1). 查询所有数据库</p>
<pre class="line-numbers language-none"><code class="language-none">show databases ;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>2). 查询当前数据库</p>
<pre class="line-numbers language-none"><code class="language-none">select database() ;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>3). 创建数据库</p>
<pre class="line-numbers language-none"><code class="language-none">create database [ if not exists ] 数据库名 [ default charset 字符集 ] [ collate 排序规则 ] ;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>4). 删除数据库</p>
<pre class="line-numbers language-none"><code class="language-none">drop database [ if exists ] 数据库名 ;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>如果删除一个不存在的数据库，将会报错。此时，可以加上参数 if exists ，如果数据库存在，再<br>执行删除，否则不执行删除。</p>
<p>5). 切换数据库</p>
<pre class="line-numbers language-none"><code class="language-none">use 数据库名 ;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>我们要操作某一个数据库下的表时，就需要通过该指令，切换到对应的数据库下，否则是不能操作的。<br>比如，切换到itcast数据，执行如下SQL：</p>
<pre class="line-numbers language-none"><code class="language-none">use itcast;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="2-3-2-表操作"><a href="#2-3-2-表操作" class="headerlink" title="2.3.2 表操作"></a>2.3.2 表操作</h3><h4 id="2-3-2-1-表操作-查询创建"><a href="#2-3-2-1-表操作-查询创建" class="headerlink" title="2.3.2.1 表操作-查询创建"></a>2.3.2.1 表操作-查询创建</h4><p>1). 查询当前数据库所有表</p>
<pre class="line-numbers language-none"><code class="language-none">show tables;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>比如,我们可以切换到sys这个系统数据库,并查看系统数据库中的所有表结构。</p>
<pre class="line-numbers language-none"><code class="language-none">use sys;
show tables;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>2). 查看指定表结构</p>
<pre class="line-numbers language-none"><code class="language-none">desc 表名 ;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>通过这条指令，我们可以查看到指定表的字段，字段的类型、是否可以为NULL，是否存在默认值等信<br>息。</p>
<p>3). 查询指定表的建表语句</p>
<pre class="line-numbers language-none"><code class="language-none">show 1 create table 表名 ;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>通过这条指令，主要是用来查看建表语句的，而有部分参数我们在创建表的时候，并未指定也会查询<br>到，因为这部分是数据库的默认值，如：存储引擎、字符集等。</p>
<p>4). 创建表结构</p>
<pre class="line-numbers language-none"><code class="language-none">CREATE TABLE 表名(
  字段1 字段1类型 [ COMMENT 字段1注释 ],
  字段2 字段2类型 [COMMENT 字段2注释 ],
  字段3 字段3类型 [COMMENT 字段3注释 ],
  ......
  字段n 字段n类型 [COMMENT 字段n注释 ]
) [ COMMENT 表注释 ] ;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>注意: […] 内为可选参数，最后一个字段后面没有逗号</p>
<h4 id="2-3-2-2-表操作-数据类型"><a href="#2-3-2-2-表操作-数据类型" class="headerlink" title="2.3.2.2 表操作-数据类型"></a>2.3.2.2 表操作-数据类型</h4><p>在上述的建表语句中，我们在指定字段的数据类型时，用到了int ，varchar，那么在MySQL中除了<br>以上的数据类型，还有哪些常见的数据类型呢？ 接下来,我们就来详细介绍一下MySQL的数据类型。<br>MySQL中的数据类型有很多，主要分为三类：数值类型、字符串类型、日期时间类型。<br>1). 数值类型</p>
<pre class="line-numbers language-none"><code class="language-none">类型         大小   有符号(SIGNED)范围         无符号(UNSIGNED)范围   描述
TINYINT     1byte  (-128，127)               (0，255)             小整数值
SMALLINT    2bytes (-32768，32767)           (0，65535)           大整数值
MEDIUMINT   3bytes (-8388608，8388607)       (0，16777215)        大整数值
INT/INTEGER 4bytes (-2147483648，2147483647) (0，4294967295)      大整数值
BIGINT      8bytes (-2^63，2^63-1)           (0，2^64-1)          极大整数值
FLOAT       4bytes (-3.402823466 E+38，3.402823466351 E+38)0 和 (1.175494351 E-38，3.402823466 E+38)单精度浮点数值
DOUBLE      8bytes (-1.7976931348623157E+308，1.7976931348623157E+308)0 和(2.2250738585072014E-308，1.7976931348623157E+308)双精度浮点数值
DECIMAL     依赖于M(精度)和D(标度)的值          依赖于M(精度)和D(标度)的值 小数值(精确定点数)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-none"><code class="language-none">如:
  1). 年龄字段 -- 不会出现负数, 而且人的年龄不会太大
  age tinyint unsigned
  2). 分数 -- 总分100分, 最多出现一位小数
  score double(4,1)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>2). 字符串类型</p>
<pre class="line-numbers language-none"><code class="language-none">类型        大小                     描述
CHAR        0-255 bytes             定长字符串(需要指定长度)
VARCHAR     0-65535 bytes           变长字符串(需要指定长度)
TINYBLOB    0-255 bytes             不超过255个字符的二进制数据
TINYTEXT    0-255 bytes             短文本字符串
BLOB        0-65 535 bytes          二进制形式的长文本数据
TEXT        0-65 535 bytes          长文本数据
MEDIUMBLOB  0-16 777 215 bytes      二进制形式的中等长度文本数据
MEDIUMTEXT  0-16 777 215 bytes      中等长度文本数据
LONGBLOB    0-4 294 967 295 bytes   二进制形式的极大文本数据
LONGTEXT    0-4 294 967 295 bytes   极大文本数据<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>char 与 varchar 都可以描述字符串，char是定长字符串，指定长度多长，就占用多少个字符，和<br>字段值的长度无关 。而varchar是变长字符串，指定的长度为最大占用长度 。相对来说，char的性<br>能会更高些。</p>
<pre class="line-numbers language-none"><code class="language-none">如：
  1). 用户名 username ------&gt; 长度不定, 最长不会超过50
  username varchar(50)
  2). 性别 gender ---------&gt; 存储值, 不是男,就是女
  gender char(1)
  3). 手机号 phone --------&gt; 固定长度为11
  phone char(11)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>3). 日期时间类型</p>
<pre class="line-numbers language-none"><code class="language-none">类型      大小    范围                                        格式                   描述
DATE      3      1000-01-01 至 9999-12-31                    YYYY-MM-DD            日期值
TIME      3      -838:59:59 至 838:59:59                     HH:MM:SS              时间值或持续时间
YEAR      1      1901 至 2155                                YYYY                  年份值
DATETIME  8      1000-01-01 00:00:00 至9999-12-31 23:59:59   YYYY-MM-DDHH:MM:SS    混合日期和时间值
TIMESTAMP 4      1970-01-01 00:00:01 至2038-01-19 03:14:07   YYYY-MM-DDHH:MM:SS    混合日期和时间值，时间戳<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-none"><code class="language-none">如:
  1). 生日字段 birthday
  birthday date
  2). 创建时间 createtime
  createtime datetime<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="2-4-图形化界面工具"><a href="#2-4-图形化界面工具" class="headerlink" title="2.4 图形化界面工具"></a>2.4 图形化界面工具</h2><p>上述，我们已经讲解了通过DDL语句，如何操作数据库、操作表、操作表中的字段，而通过DDL语句执<br>行在命令进行操作，主要存在以下两点问题：<br>1).会影响开发效率 ;<br>2). 使用起来，并不直观，并不方便 ；<br>所以呢，我们在日常的开发中，会借助于MySQL的图形化界面，来简化开发，提高开发效率。而目前<br>mysql主流的图形化界面工具，有以下几种：<br><img src="/images/MySQL%E5%9B%BE%E5%BD%A2%E5%8C%96%E7%95%8C%E9%9D%A2%E5%B7%A5%E5%85%B7.jpg" alt="MySQL图形化界面工具"><br>而本次课程中，选择最后一种DataGrip，这种图形化界面工具，功能更加强大，界面提示更加友好，<br>是我们使用MySQL的不二之选。接下来，我们来介绍一下DataGrip该如何安装、使用。</p>
<h3 id="2-4-1-安装"><a href="#2-4-1-安装" class="headerlink" title="2.4.1 安装"></a>2.4.1 安装</h3><p>1). 找到资料中准备好的安装包，双击开始安装<br>2). 点击next，一步一步的完成安装</p>
<h2 id="2-5-DML"><a href="#2-5-DML" class="headerlink" title="2.5 DML"></a>2.5 DML</h2><p>DML英文全称是Data Manipulation Language(数据操作语言)，用来对数据库中表的数据记录进行增、删、改操作。<br>  添加数据（INSERT）<br>  修改数据（UPDATE）<br>  删除数据（DELETE）</p>
<h3 id="2-5-1-添加数据"><a href="#2-5-1-添加数据" class="headerlink" title="2.5.1 添加数据"></a>2.5.1 添加数据</h3><p>1). 给指定字段添加数据</p>
<pre class="line-numbers language-none"><code class="language-none">INSERT INTO 表名 (字段名1, 字段名2, ...) VALUES 1 (值1, 值2, ...);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>查询数据库的数据：</p>
<pre class="line-numbers language-none"><code class="language-none">select 1 * from employee;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>2). 给全部字段添加数据</p>
<pre class="line-numbers language-none"><code class="language-none">INSERT INTO 表名 VALUES 1 (值1, 值2, ...);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>3). 批量添加数据</p>
<pre class="line-numbers language-none"><code class="language-none">INSERT INTO 表名 (字段名1, 字段名2, ...) VALUES (值1, 值2, ...), (值1, 值2, ...), (值1, 值2, ...) ;

INSERT INTO 表名 VALUES (值1, 值2, ...), (值1, 值2, ...), (值1, 值2, ...) ;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>注意事项:<br>• 插入数据时，指定的字段顺序需要与值的顺序是一一对应的。<br>• 字符串和日期型数据应该包含在引号中。<br>• 插入的数据大小，应该在字段的规定范围内。</p>
<h3 id="2-5-2-修改数据"><a href="#2-5-2-修改数据" class="headerlink" title="2.5.2 修改数据"></a>2.5.2 修改数据</h3><p>修改数据的具体语法为:</p>
<pre class="line-numbers language-none"><code class="language-none">UPDATE 表名 SET 字段名1 = 值1 , 字段名2 = 值2 , .... 1 [ WHERE 条件 ] ;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>注意事项:<br>修改语句的条件可以有，也可以没有，如果没有条件，则会修改整张表的所有数据。</p>
<h3 id="2-5-3-删除数据"><a href="#2-5-3-删除数据" class="headerlink" title="2.5.3 删除数据"></a>2.5.3 删除数据</h3><p>删除数据的具体语法为：</p>
<pre class="line-numbers language-none"><code class="language-none">DELETE FROM 表名 [ WHERE 条件 ] ;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>注意事项:<br>• DELETE 语句的条件可以有，也可以没有，如果没有条件，则会删除整张表的所有数据。<br>• DELETE 语句不能删除某一个字段的值(可以使用UPDATE，将该字段值置为NULL即可)。<br>• 当进行删除全部数据操作时，datagrip会提示我们，询问是否确认删除，我们直接点击Execute即可。</p>
<h2 id="2-6-DQL"><a href="#2-6-DQL" class="headerlink" title="2.6 DQL"></a>2.6 DQL</h2><p>DQL英文全称是Data Query Language(数据查询语言)，数据查询语言，用来查询数据库中表的记录。</p>
<p>查询关键字: SELECT</p>
<p>在一个正常的业务系统中，查询操作的频次是要远高于增删改的，当我们去访问企业官网、电商网站，<br>在这些网站中我们所看到的数据，实际都是需要从数据库中查询并展示的。而且在查询的过程中，可能<br>还会涉及到条件、排序、分页等操作。</p>
<h3 id="2-6-1-基本语法"><a href="#2-6-1-基本语法" class="headerlink" title="2.6.1 基本语法"></a>2.6.1 基本语法</h3><p>DQL 查询语句，语法结构如下</p>
<pre class="line-numbers language-none"><code class="language-none">SELECT
  字段列表
FROM
  表名列表
WHERE
  条件列表
GROUP BY
  分组字段列表
HAVING
  分组后条件列表
ORDER BY
  排序字段列表
LIMIT
  分页参数<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>我们在讲解这部分内容的时候，会将上面的完整语法进行拆分，分为以下几个部分：<br>  基本查询（不带任何条件）<br>  条件查询（WHERE）<br>  聚合函数（count、max、min、avg、sum）<br>  分组查询（group by）<br>  排序查询（order by）<br>  分页查询（limit）</p>
<h3 id="2-6-2-基础查询"><a href="#2-6-2-基础查询" class="headerlink" title="2.6.2 基础查询"></a>2.6.2 基础查询</h3><p>在基本查询的DQL语句中，不带任何的查询条件，查询的语法如下：<br>1). 查询多个字段</p>
<pre class="line-numbers language-none"><code class="language-none">SELECT 字段1, 字段2, 字1 段3 ... FROM 表名 ;

SELECT * FROM 表名 ;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>注意 : * 号代表查询所有字段，在实际开发中尽量少用（不直观、影响效率）。</p>
<p>2). 字段设置别名</p>
<pre class="line-numbers language-none"><code class="language-none">SELECT 字段1 [ AS 别名1 ] , 字段2 [ AS 别名2 1 ] ... FROM 表名;

SELECT 字段1 [ 别名1 ] , 字段2 [ 别名2 ] ... FROM 表名;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>

<p>3). 去除重复记录</p>
<pre class="line-numbers language-none"><code class="language-none">SELECT DISTINCT 字段列表 FROM 表名;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="2-6-3-条件查询"><a href="#2-6-3-条件查询" class="headerlink" title="2.6.3 条件查询"></a>2.6.3 条件查询</h3><p>1). 语法</p>
<pre class="line-numbers language-none"><code class="language-none">SELECT 字段列表 FROM 表1 名 WHERE 条件列表 ;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>2). 条件<br>常用的比较运算符如下:</p>
<pre class="line-numbers language-none"><code class="language-none">比较运算符              功能
&gt;                      大于
&gt;=                     大于等于
&lt;                      小于
&lt;=                     小于等于
=                      等于
&lt;&gt; 或 !=               不等于
BETWEEN ... AND ...    在某个范围之内(含最小、最大值)
IN(...)                在in之后的列表中的值，多选一
LIKE                   占位符模糊匹配(_匹配单个字符, %匹配任意个字符)
IS NULL                是NULL<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>常用的逻辑运算符如下:</p>
<pre class="line-numbers language-none"><code class="language-none">逻辑运算符        功能
AND 或 &amp;&amp;        并且 (多个条件同时成立)
OR 或 ||         或者 (多个条件任意一个成立)
NOT 或 !         非 , 不是<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>
<h3 id="2-6-4-聚合函数"><a href="#2-6-4-聚合函数" class="headerlink" title="2.6.4 聚合函数"></a>2.6.4 聚合函数</h3><p>1). 介绍<br>将一列数据作为一个整体，进行纵向计算 。<br>2). 常见的聚合函数</p>
<pre class="line-numbers language-none"><code class="language-none">函数      功能
count    统计数量
max      最大值
min      最小值
avg      平均值
sum      求和<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>3). 语法</p>
<pre class="line-numbers language-none"><code class="language-none">SELECT 聚合函1 数(字段列表) FROM 表名 ;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>注意 : NULL值是不参与所有聚合函数运算的。</p>
<h3 id="2-6-5-分组查询"><a href="#2-6-5-分组查询" class="headerlink" title="2.6.5 分组查询"></a>2.6.5 分组查询</h3><p>1). 语法</p>
<pre class="line-numbers language-none"><code class="language-none">SELECT 字段列表 FROM 表名 [ WHERE 条件 ] GROUP BY 分组字段名 [ HAVING 分组后过滤条件 ];<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>2). where与having区别<br>  执行时机不同：where是分组之前进行过滤，不满足where条件，不参与分组；而having是分组之后对结果进行过滤。<br>  判断条件不同：where不能对聚合函数进行判断，而having可以。</p>
<p>注意事项:<br>  • 分组之后，查询的字段一般为聚合函数和分组字段，查询其他字段无任何意义。<br>  • 执行顺序: where &gt; 聚合函数 &gt; having 。<br>  • 支持多字段分组, 具体语法为 : group by columnA,columnB</p>
<h3 id="2-6-6-排序查询"><a href="#2-6-6-排序查询" class="headerlink" title="2.6.6 排序查询"></a>2.6.6 排序查询</h3><p>排序在日常开发中是非常常见的一个操作，有升序排序，也有降序排序。</p>
<p>1). 语法</p>
<pre class="line-numbers language-none"><code class="language-none">SELECT 字段列表 FROM 表名 ORDER BY 字段1 排1 序方式1 , 字段2 排序方式2 ;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>2). 排序方式<br>  ASC : 升序(默认值)<br>  DESC: 降序<br>注意事项：<br>  • 如果是升序, 可以不指定排序方式ASC ;<br>  • 如果是多字段排序，当第一个字段值相同时，才会根据第二个字段进行排序 ;</p>
<h3 id="2-6-7-分页查询"><a href="#2-6-7-分页查询" class="headerlink" title="2.6.7 分页查询"></a>2.6.7 分页查询</h3><p>分页操作在业务系统开发时，也是非常常见的一个功能，我们在网站中看到的各种各样的分页条，后台<br>都需要借助于数据库的分页操作。<br>1). 语法</p>
<pre class="line-numbers language-none"><code class="language-none">SELECT 字段列表 FROM 表名 LIMIT 起始索引, 查询记录数 ;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>注意事项:<br>  • 起始索引从0开始，起始索引 = （查询页码 - 1）* 每页显示记录数。<br>  • 分页查询是数据库的方言，不同的数据库有不同的实现，MySQL中是LIMIT。<br>  • 如果查询的是第一页数据，起始索引可以省略，直接简写为 limit 10。</p>
<h3 id="2-6-9-执行顺序"><a href="#2-6-9-执行顺序" class="headerlink" title="2.6.9 执行顺序"></a>2.6.9 执行顺序</h3><p>在讲解DQL语句的具体语法之前，我们已经讲解了DQL语句的完整语法，及编写顺序，接下来，我们要<br>来说明的是DQL语句在执行时的执行顺序，也就是先执行那一部分，后执行那一部分。</p>
<p><img src="/images/%E6%89%A7%E8%A1%8C%E9%A1%BA%E5%BA%8F.jpg" alt="执行顺序"><br>验证：<br>查询年龄大于15的员工姓名、年龄，并根据年龄进行升序排序。</p>
<pre class="line-numbers language-none"><code class="language-none">select name , age from emp where age &gt; 15 1 order by age asc;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>在查询时，我们给emp表起一个别名 e，然后在select 及 where中使用该别名。</p>
<pre class="line-numbers language-none"><code class="language-none">select e.name , e.age from emp e where e.age &gt; 15 order by age asc;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>执行上述SQL语句后，我们看到依然可以正常的查询到结果，此时就说明： from 先执行, 然后where 和 select 执行。那 where 和 select 到底哪个先执行呢?<br>此时，此时我们可以给select后面的字段起别名，然后在 where 中使用这个别名，然后看看是否可以执行成功。</p>
<pre class="line-numbers language-none"><code class="language-none">select e.name ename , e.age eage from emp e where eage &gt; 15 order by age asc;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>执行上述SQL报错了:<br>由此我们可以得出结论: from 先执行，然后执行 where ， 再执行select 。<br>综上所述，我们可以看到DQL语句的执行顺序为： from … where … group by …having … select … order by … limit …</p>
<h2 id="2-7-DCL"><a href="#2-7-DCL" class="headerlink" title="2.7 DCL"></a>2.7 DCL</h2><p>DCL英文全称是Data Control Language(数据控制语言)，用来管理数据库用户、控制数据库的访<br>问权限。</p>
<h3 id="2-7-1-管理用户"><a href="#2-7-1-管理用户" class="headerlink" title="2.7.1 管理用户"></a>2.7.1 管理用户</h3><p>1). 查询用户</p>
<pre class="line-numbers language-none"><code class="language-none">select 1 * from mysql.user;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>查询的结果如下:<br><img src="/images/%E6%9F%A5%E8%AF%A2%E7%9A%84%E7%BB%93%E6%9E%9C.jpg" alt="查询的结果"></p>
<p>其中 Host代表当前用户访问的主机, 如果为localhost, 仅代表只能够在当前本机访问，是不可以<br>远程访问的。 User代表的是访问该数据库的用户名。在MySQL中需要通过Host和User来唯一标识一<br>个用户。<br>2). 创建用户</p>
<pre class="line-numbers language-none"><code class="language-none">CREATE USER '用户名'@'主机名' IDENTIFIED BY '密码';<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>3). 修改用户密码</p>
<pre class="line-numbers language-none"><code class="language-none">ALTER USER '用户名'@'主机名' IDENTIFIED WITH mysql_native_password BY '新密码' ;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>4). 删除用户</p>
<pre class="line-numbers language-none"><code class="language-none">DROP USER '用户名'@'主机名' ;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>注意事项:<br>  • 在MySQL中需要通过用户名@主机名的方式，来唯一标识一个用户。<br>  • 主机名可以使用 % 通配。<br>  • 这类SQL开发人员操作的比较少，主要是DBA（ Database Administrator 数据库管理员）使用。</p>
<h3 id="2-7-2-权限控制"><a href="#2-7-2-权限控制" class="headerlink" title="2.7.2 权限控制"></a>2.7.2 权限控制</h3><p>MySQL中定义了很多种权限，但是常用的就以下几种：</p>
<pre class="line-numbers language-none"><code class="language-none">权限                  说明
ALL, ALL PRIVILEGES   所有权限
SELECT                查询数据
INSERT                插入数据
UPDATE                修改数据
DELETE                删除数据
ALTER                 修改表
DROP                  删除数据库/表/视图
CREATE                创建数据库/表<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>上述只是简单罗列了常见的几种权限描述，其他权限描述及含义，可以直接参考官方文档。</p>
<p>1). 查询权限</p>
<pre class="line-numbers language-none"><code class="language-none">SHOW GRANTS 1 FOR '用户名'@'主机名' ;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>2). 授予权限</p>
<pre class="line-numbers language-none"><code class="language-none">GRANT 权限列表 ON 数据库名.表名 TO '用户名'@'主机名';<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>3). 撤销权限</p>
<pre class="line-numbers language-none"><code class="language-none">REVOKE 权限列表 ON 数据库名.表名 FROM '用户名'@'主机名';<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>注意事项：<br>  • 多个权限之间，使用逗号分隔<br>  • 授权时， 数据库名和表名可以使用 * 进行通配，代表所有。</p>
<h1 id="3-函数"><a href="#3-函数" class="headerlink" title="3. 函数"></a>3. 函数</h1><p>函数 是指一段可以直接被另一段程序调用的程序或代码。 也就意味着，这一段程序或代码在MySQL中已经给我们提供了，我们要做的就是在合适的业务场景调用对应的函数完成对应的业务需求即可。 那么，函数到底在哪儿使用呢？</p>
<p>1). 在企业的OA或其他的人力系统中，经常会提供的有这样一个功能，每一个员工登录上来之后都能够看到当前员工入职的天数。 而在数据库中，存储的都是入职日期，如 2000-11-12，那如果快速计算出天数呢？<br>2). 在做报表这类的业务需求中,我们要展示出学员的分数等级分布。而在数据库中，存储的是学生的分数值，如98/75，如何快速判定分数的等级呢？<br>其实，上述的这一类的需求呢，我们通过MySQL中的函数都可以很方便的实现 。</p>
<p>MySQL中的函数主要分为以下四类： 字符串函数、数值函数、日期函数、流程函数。</p>
<h2 id="3-1-字符串函数"><a href="#3-1-字符串函数" class="headerlink" title="3.1 字符串函数"></a>3.1 字符串函数</h2><p>MySQL中内置了很多字符串函数，常用的几个如下：</p>
<pre class="line-numbers language-none"><code class="language-none">函数                      功能
CONCAT(S1,S2,...Sn)       字符串拼接，将S1，S2，... Sn拼接成一个字符串
LOWER(str)                将字符串str全部转为小写
UPPER(str)                将字符串str全部转为大写
LPAD(str,n,pad)           左填充，用字符串pad对str的左边进行填充，达到n个字符串长度
RPAD(str,n,pad)           右填充，用字符串pad对str的右边进行填充，达到n个字符串长度
TRIM(str)                 去掉字符串头部和尾部的空格
SUBSTRING(str,start,len)  返回从字符串str从start位置起的len个长度的字符串<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>演示如下：<br>A. concat : 字符串拼接</p>
<pre class="line-numbers language-none"><code class="language-none">select concat('1 Hello' , ' MySQL');<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>B. lower : 全部转小写</p>
<pre class="line-numbers language-none"><code class="language-none">select lower('Hello');<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>upper : 全部转大写</p>
<pre class="line-numbers language-none"><code class="language-none">select upper('Hello');<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>lpad : 左填充</p>
<pre class="line-numbers language-none"><code class="language-none">select lpad('01', 5, '-');<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>rpad : 右填充</p>
<pre class="line-numbers language-none"><code class="language-none">select rpad('01', 5, '-');<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>trim : 去除空格</p>
<pre class="line-numbers language-none"><code class="language-none">select trim(' Hello MySQL ');<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>substring : 截取子字符串</p>
<pre class="line-numbers language-none"><code class="language-none">select substring('1 Hello MySQL',1,5);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="3-2-数值函数"><a href="#3-2-数值函数" class="headerlink" title="3.2 数值函数"></a>3.2 数值函数</h2><p>常见的数值函数如下：</p>
<pre class="line-numbers language-none"><code class="language-none">函数            功能
CEIL(x)        向上取整
FLOOR(x)       向下取整
MOD(x,y)       返回x/y的模
RAND()         返回0~1内的随机数
ROUND(x,y)     求参数x的四舍五入的值，保留y位小数<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>演示如下：<br>A. ceil：向上取整</p>
<pre class="line-numbers language-none"><code class="language-none">select ceil(1.1);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>B. floor：向下取整</p>
<pre class="line-numbers language-none"><code class="language-none">select floor(1.9);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>C. mod：取模</p>
<pre class="line-numbers language-none"><code class="language-none">select mod(7,4);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>D. rand：获取随机数</p>
<pre class="line-numbers language-none"><code class="language-none">select rand();<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>E. round：四舍五入</p>
<pre class="line-numbers language-none"><code class="language-none">select round(2.344,2);<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="3-3-日期函数"><a href="#3-3-日期函数" class="headerlink" title="3.3 日期函数"></a>3.3 日期函数</h2><p>常见的日期函数如下：</p>
<pre class="line-numbers language-none"><code class="language-none">函数                                功能
CURDATE()                          返回当前日期
CURTIME()                          返回当前时间
NOW()                              返回当前日期和时间
YEAR(date)                         获取指定date的年份
MONTH(date)                        获取指定date的月份
DAY(date)                          获取指定date的日期
DATE_ADD(date, INTERVAL exprtype)  返回一个日期/时间值加上一个时间间隔expr后的时间值
DATEDIFF(date1,date2)              返回起始时间date1 和 结束时间date2之间的天数<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>演示如下：<br>A. curdate：当前日期</p>
<pre class="line-numbers language-none"><code class="language-none">select curdate();<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>B. curtime：当前时间</p>
<pre class="line-numbers language-none"><code class="language-none">select curtime();<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>C. now：当前日期和时间</p>
<pre class="line-numbers language-none"><code class="language-none">select now();<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>D. YEAR , MONTH , DAY：当前年、月、日</p>
<pre class="line-numbers language-none"><code class="language-none">select YEAR(now());
select MONTH(now());
select DAY(now());<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>E. date_add：增加指定的时间间隔</p>
<pre class="line-numbers language-none"><code class="language-none">select date_add(now(), 1 INTERVAL 70 YEAR );<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>F. datediff：获取两个日期相差的天数</p>
<pre class="line-numbers language-none"><code class="language-none">select datediff('2021-10-01', '2021-12-01');<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="3-4-流程函数"><a href="#3-4-流程函数" class="headerlink" title="3.4 流程函数"></a>3.4 流程函数</h2><p>流程函数也是很常用的一类函数，可以在SQL语句中实现条件筛选，从而提高语句的效率。</p>
<pre class="line-numbers language-none"><code class="language-none">函数                             功能
IF(value , t , f)               如果value为true，则返回t，否则返回f
IFNULL(value1 , value2)         如果value1不为空，返回value1，否则返回value2
CASE WHEN [ val1 ] THEN [res1] ...ELSE [ default ] END       如果val1为true，返回res1，... 否则返回default默认值
CASE [ expr ] WHEN [ val1 ] THEN[res1] ... ELSE [ default ] END      如果expr的值等于val1，返回res1，... 否则返回default默认值<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>演示如下：<br>A. if</p>
<pre class="line-numbers language-none"><code class="language-none">select if(false, 'Ok', 'Error');<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>B. ifnull</p>
<pre class="line-numbers language-none"><code class="language-none">select ifnull('Ok','Default');
select ifnull('','Default');
select ifnull(null,'Default');<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>C. case when then else end<br>需求: 查询emp表的员工姓名和工作地址 (北京/上海 —-&gt; 一线城市 , 其他 —-&gt; 二线城市)</p>
<pre class="line-numbers language-none"><code class="language-none">select
  name,
  ( case workaddress when '北京' then '一线城市' when '上海' then '一线城市' else'二线城市' end ) as '工作地址'
from emp;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span></span></code></pre>

<h1 id="4-约束"><a href="#4-约束" class="headerlink" title="4. 约束"></a>4. 约束</h1><h2 id="4-1-概述"><a href="#4-1-概述" class="headerlink" title="4.1 概述"></a>4.1 概述</h2><p>概念：约束是作用于表中字段上的规则，用于限制存储在表中的数据。<br>目的：保证数据库中数据的正确、有效性和完整性。<br>分类:</p>
<pre class="line-numbers language-none"><code class="language-none">约束      描述                                                  关键字
非空约束   限制该字段的数据不能为                                  null  NOT NULL
唯一约束   保证该字段的所有数据都是唯一、不重复的                    UNIQUE
主键约束   主键是一行数据的唯一标识，要求非空且唯一                  PRIMARYKEY
默认约束   保存数据时，如果未指定该字段的值，则采用默认值             DEFAULT
检查约束   保证字段值满足某一个条件                                CHECK
外键约束   用来让两张表的数据之间建立连接，保证数据的一致性和完整性     FOREIGNKEY<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>注意：约束是作用于表中字段上的，可以在创建表/修改表的时候添加约束。</p>
<h2 id="4-3-外键约束"><a href="#4-3-外键约束" class="headerlink" title="4.3 外键约束"></a>4.3 外键约束</h2><h3 id="4-3-1-介绍"><a href="#4-3-1-介绍" class="headerlink" title="4.3.1 介绍"></a>4.3.1 介绍</h3><p>外键：用来让两张表的数据之间建立连接，从而保证数据的一致性和完整性。<br>我们来看一个例子：<br><img src="/images/%E5%A4%96%E9%94%AE%E7%BA%A6%E6%9D%9F.jpg" alt="外键约束"><br>左侧的emp表是员工表，里面存储员工的基本信息，包含员工的ID、姓名、年龄、职位、薪资、入职日期、上级主管ID、部门ID，在员工的信息中存储的是部门的ID dept_id，而这个部门的ID是关联的部门表dept的主键id，那emp表的dept_id就是外键,关联的是另一张表的主键。<br>注意：目前上述两张表，只是在逻辑上存在这样一层关系；在数据库层面，并未建立外键关联，所以是无法保证数据的一致性和完整性的。</p>
<h3 id="4-3-2-语法"><a href="#4-3-2-语法" class="headerlink" title="4.3.2 语法"></a>4.3.2 语法</h3><p>1). 添加外键</p>
<pre class="line-numbers language-none"><code class="language-none">CREATE TABLE 表名(
  字段名 数据类型,
  ...
  [CONSTRAINT] [外键名称] FOREIGN KEY (外键字段名) REFERENCES 主表 (主表列名)
);<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<pre class="line-numbers language-none"><code class="language-none">ALTER TABLE 表名 ADD CONSTRAINT 外键名称 FOREIGN KEY (外键字段名)REFERENCES 主表 (主表列名) ;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>2). 删除外键</p>
<pre class="line-numbers language-none"><code class="language-none">ALTER TABLE 表名 DROP FOREIGN 1 KEY 外键名称;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h3 id="4-3-3-删除-x2F-更新行为"><a href="#4-3-3-删除-x2F-更新行为" class="headerlink" title="4.3.3 删除/更新行为"></a>4.3.3 删除/更新行为</h3><p>添加了外键之后，再删除父表数据时产生的约束行为，我们就称为删除/更新行为。具体的删除/更新行为有以下几种:</p>
<pre class="line-numbers language-none"><code class="language-none">行为         说明
NOACTION    当在父表中删除/更新对应记录时，首先检查该记录是否有对应外键，如果有则不允许删除/更新。 (与 RESTRICT 一致) 默认行为
RESTRICT    当在父表中删除/更新对应记录时，首先检查该记录是否有对应外键，如果有则不允许删除/更新。 (与 NO ACTION 一致) 默认行为
CASCADE     当在父表中删除/更新对应记录时，首先检查该记录是否有对应外键，如果有，则也删除/更新外键在子表中的记录。
SET NULL    当在父表中删除对应记录时，首先检查该记录是否有对应外键，如果有则设置子表中该外键值为null（这就要求该外键允许取null）。
SETDEFAULT  父表有变更时，子表将外键列设置成一个默认的值 (Innodb不支持)<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>具体语法为:</p>
<pre class="line-numbers language-none"><code class="language-none">ALTER TABLE 表名 ADD CONSTRAINT 外键名称 FOREIGN KEY (外键字段) REFERENCES主表名 (主表字段名) ON UPDATE CASCADE ON DELETE CASCADE;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h1 id="5-多表查询"><a href="#5-多表查询" class="headerlink" title="5. 多表查询"></a>5. 多表查询</h1><p>我们之前在讲解SQL语句的时候，讲解了DQL语句，也就是数据查询语句，但是之前讲解的查询都是单表查询，而本章节我们要学习的则是多表查询操作，主要从以下几个方面进行讲解。</p>
<h2 id="5-1-多表关系"><a href="#5-1-多表关系" class="headerlink" title="5.1 多表关系"></a>5.1 多表关系</h2><p>项目开发中，在进行数据库表结构设计时，会根据业务需求及业务模块之间的关系，分析并设计表结构，由于业务之间相互关联，所以各个表结构之间也存在着各种联系，基本上分为三种：<br>  一对多(多对一)<br>  多对多<br>  一对一</p>
<h2 id="5-2-多表查询概述"><a href="#5-2-多表查询概述" class="headerlink" title="5.2 多表查询概述"></a>5.2 多表查询概述</h2><h3 id="5-2-2-概述"><a href="#5-2-2-概述" class="headerlink" title="5.2.2 概述"></a>5.2.2 概述</h3><p>多表查询就是指从多张表中查询数据。<br>原来查询单表数据，执行的SQL形式为：select * from emp;<br>那么我们要执行多表查询，就只需要使用逗号分隔多张表即可，如： select * from emp , dept;<br><img src="/images/%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2.jpg" alt="多表查询"><br>此时,我们看到查询结果中包含了大量的结果集，总共102条记录，而这其实就是员工表emp所有的记录(17) 与 部门表dept所有记录(6) 的所有组合情况，这种现象称之为笛卡尔积。接下来，就来简单介绍下笛卡尔积。<br>笛卡尔积: 笛卡尔乘积是指在数学中，两个集合A集合 和 B集合的所有组合情况。<br><img src="/images/%E7%AC%9B%E5%8D%A1%E5%B0%94%E7%A7%AF1.jpg" alt="笛卡尔积1"><br>而在多表查询中，我们是需要消除无效的笛卡尔积的，只保留两张表关联部分的数据。<br><img src="/images/%E7%AC%9B%E5%8D%A1%E5%B0%94%E7%A7%AF2.jpg" alt="笛卡尔积2"><br>在SQL语句中，如何来去除无效的笛卡尔积呢？ 我们可以给多表查询加上连接查询的条件即可。</p>
<pre class="line-numbers language-none"><code class="language-none">select * from emp , dept where emp.dept_id = dept.id;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p><img src="/images/%E7%AC%9B%E5%8D%A1%E5%B0%94%E7%A7%AF3.jpg" alt="笛卡尔积3"><br>而由于id为17的员工，没有dept_id字段值，所以在多表查询时，根据连接查询的条件并没有查询到。</p>
<h3 id="5-2-3-分类"><a href="#5-2-3-分类" class="headerlink" title="5.2.3 分类"></a>5.2.3 分类</h3><p>连接查询<br>  内连接：相当于查询A、B交集部分数据<br>  外连接：<br>  左外连接：查询左表所有数据，以及两张表交集部分数据<br>  右外连接：查询右表所有数据，以及两张表交集部分数据<br>  自连接：当前表与自身的连接查询，自连接必须使用表别名<br>子查询<br><img src="/images/%E8%BF%9E%E6%8E%A5%E6%9F%A5%E8%AF%A2.jpg" alt="连接查询"></p>
<h2 id="5-3-内连接"><a href="#5-3-内连接" class="headerlink" title="5.3 内连接"></a>5.3 内连接</h2><p>内连接查询的是两张表交集部分的数据<br>内连接的语法分为两种: 隐式内连接、显式内连接。先来学习一下具体的语法结构。<br>1). 隐式内连接</p>
<pre class="line-numbers language-none"><code class="language-none">SELECT 字段列表 FROM 表1 , 表1 2 WHERE 条件 ... ;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>2). 显式内连接</p>
<pre class="line-numbers language-none"><code class="language-none">SELECT 字段列表 FROM 表1 [ INNER ] JOIN 表2 ON 连接条件 ... ;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="5-4-外连接"><a href="#5-4-外连接" class="headerlink" title="5.4 外连接"></a>5.4 外连接</h2><p>外连接分为两种，分别是：左外连接 和 右外连接。具体的语法结构为：<br>1). 左外连接</p>
<pre class="line-numbers language-none"><code class="language-none">SELECT 字段列表 FROM 表1 LEFT [ OUTER ] JOIN 1 表2 ON 条件 ... ;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>左外连接相当于查询表1(左表)的所有数据，当然也包含表1和表2交集部分的数据。<br>2). 右外连接</p>
<pre class="line-numbers language-none"><code class="language-none">SELECT 字段列表 FROM 表1 RIGHT [ OUTER ] JOIN 表2 ON 条件 ... ;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>右外连接相当于查询表2(右表)的所有数据，当然也包含表1和表2交集部分的数据。</p>
<h2 id="5-5-自连接"><a href="#5-5-自连接" class="headerlink" title="5.5 自连接"></a>5.5 自连接</h2><h3 id="5-5-1-自连接查询"><a href="#5-5-1-自连接查询" class="headerlink" title="5.5.1 自连接查询"></a>5.5.1 自连接查询</h3><p>自连接查询，顾名思义，就是自己连接自己，也就是把一张表连接查询多次。我们先来学习一下自连接的查询语法：</p>
<pre class="line-numbers language-none"><code class="language-none">SELECT 字段列表 FROM 表A 别名A JOIN 表A 别1 名B ON 条件 ... ;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>而对于自连接查询，可以是内连接查询，也可以是外连接查询。</p>
<h3 id="5-5-2-联合查询"><a href="#5-5-2-联合查询" class="headerlink" title="5.5.2 联合查询"></a>5.5.2 联合查询</h3><p>对于union查询，就是把多次查询的结果合并起来，形成一个新的查询结果集。</p>
<pre class="line-numbers language-none"><code class="language-none">SELECT 字段列表 FROM 表A ...
UNION [ ALL ]
SELECT 字段列表 FROM 表B ....;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span></span></code></pre>
<p>对于联合查询的多张表的列数必须保持一致，字段类型也需要保持一致。<br>union all 会将全部的数据直接合并在一起，union 会对合并之后的数据去重。<br>注意：<br>如果多条查询语句查询出来的结果，字段数量不一致，在进行union/union all联合查询时，将会报<br>错.</p>
<h2 id="5-6-子查询"><a href="#5-6-子查询" class="headerlink" title="5.6 子查询"></a>5.6 子查询</h2><h3 id="5-6-1-概述"><a href="#5-6-1-概述" class="headerlink" title="5.6.1 概述"></a>5.6.1 概述</h3><p>1). 概念<br>SQL语句中嵌套SELECT语句，称为嵌套查询，又称子查询。</p>
<pre class="line-numbers language-none"><code class="language-none">SELECT * FROM t1 WHERE column1 = ( SELECT column1 1 FROM t2 );<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>子查询外部的语句可以是INSERT / UPDATE / DELETE / SELECT 的任何一个。<br>2). 分类<br>根据子查询结果不同，分为：<br>A. 标量子查询（子查询结果为单个值）<br>B. 列子查询(子查询结果为一列)<br>C. 行子查询(子查询结果为一行)<br>D. 表子查询(子查询结果为多行多列)<br>根据子查询位置，分为：<br>A. WHERE之后<br>B. FROM之后<br>C. SELECT之后</p>
<h3 id="5-6-2-标量子查询"><a href="#5-6-2-标量子查询" class="headerlink" title="5.6.2 标量子查询"></a>5.6.2 标量子查询</h3><p>子查询返回的结果是单个值（数字、字符串、日期等），最简单的形式，这种子查询称为标量子查询。常用的操作符：= &lt;&gt; &gt; &gt;= &lt; &lt;=</p>
<h3 id="5-6-3-列子查询"><a href="#5-6-3-列子查询" class="headerlink" title="5.6.3 列子查询"></a>5.6.3 列子查询</h3><p>子查询返回的结果是一列（可以是多行），这种子查询称为列子查询。<br>常用的操作符：IN 、NOT IN 、 ANY 、SOME 、 ALL</p>
<pre class="line-numbers language-none"><code class="language-none">操作符     描述
IN        在指定的集合范围之内，多选一
NOT IN    不在指定的集合范围之内
ANY       子查询返回列表中，有任意一个满足即可
SOME      与ANY等同，使用SOME的地方都可以使用ANY
ALL       子查询返回列表的所有值都必须满足<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>

<h3 id="5-6-4-行子查询"><a href="#5-6-4-行子查询" class="headerlink" title="5.6.4 行子查询"></a>5.6.4 行子查询</h3><p>子查询返回的结果是一行（可以是多列），这种子查询称为行子查询。<br>常用的操作符：= 、&lt;&gt; 、IN 、NOT IN</p>
<h3 id="5-6-5-表子查询"><a href="#5-6-5-表子查询" class="headerlink" title="5.6.5 表子查询"></a>5.6.5 表子查询</h3><p>子查询返回的结果是多行多列，这种子查询称为表子查询。<br>常用的操作符：IN</p>
<h1 id="6-事务"><a href="#6-事务" class="headerlink" title="6. 事务"></a>6. 事务</h1><h2 id="6-1-事务简介"><a href="#6-1-事务简介" class="headerlink" title="6.1 事务简介"></a>6.1 事务简介</h2><p>事务 是一组操作的集合，它是一个不可分割的工作单位，事务会把所有的操作作为一个整体一起向系统提交或撤销操作请求，即这些操作要么同时成功，要么同时失败。</p>
<p>注意： 默认MySQL的事务是自动提交的，也就是说，当执行完一条DML语句时，MySQL会立即隐式的提交事务。</p>
<h2 id="6-2-事务操作"><a href="#6-2-事务操作" class="headerlink" title="6.2 事务操作"></a>6.2 事务操作</h2><h3 id="6-2-1-未控制事务"><a href="#6-2-1-未控制事务" class="headerlink" title="6.2.1 未控制事务"></a>6.2.1 未控制事务</h3><p>1). 测试正常情况</p>
<pre class="line-numbers language-none"><code class="language-none">-- 1. 查询张三余额
select * from account where name = '张三';
-- 2. 张三的余额减少1000
update account set money = money - 1000 where name = '张三';
-- 3. 李四的余额增加1000
update account set money = money + 1000 where name = '李四';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>测试完毕之后检查数据的状态, 可以看到数据操作前后是一致的。<br>2). 测试异常情况</p>
<pre class="line-numbers language-none"><code class="language-none">-- 1. 查询张三余额
select * from account where name = '张三';
-- 2. 张三的余额减少1000
update account set money = money - 1000 where name = '张三';
出错了....
-- 3. 李四的余额增加1000
update account set money = money + 1000 where name = '李四';<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>我们把数据都恢复到2000， 然后再次一次性执行上述的SQL语句(出错了…. 这句话不符合SQL语<br>法,执行就会报错)，检查最终的数据情况, 发现数据在操作前后不一致了。</p>
<h3 id="6-2-2-控制事务一"><a href="#6-2-2-控制事务一" class="headerlink" title="6.2.2 控制事务一"></a>6.2.2 控制事务一</h3><p>1). 查看/设置事务提交方式</p>
<pre class="line-numbers language-none"><code class="language-none">SELECT @@autocommit ;
SET @@autocommit = 0 ;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span></span></code></pre>
<p>2). 提交事务</p>
<pre class="line-numbers language-none"><code class="language-none">COMMIT;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>3). 回滚事务</p>
<pre class="line-numbers language-none"><code class="language-none">ROLLBACK;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>注意：上述的这种方式，我们是修改了事务的自动提交行为, 把默认的自动提交修改为了手动提交, 此时我们执行的DML语句都不会提交, 需要手动的执行commit进行提交。</p>
<h3 id="6-2-3-控制事务二"><a href="#6-2-3-控制事务二" class="headerlink" title="6.2.3 控制事务二"></a>6.2.3 控制事务二</h3><p>1). 开启事务</p>
<pre class="line-numbers language-none"><code class="language-none">START TRANSACTION 或 BEGIN ;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>2). 提交事务</p>
<pre class="line-numbers language-none"><code class="language-none">COMMIT;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>3). 回滚事务</p>
<pre class="line-numbers language-none"><code class="language-none">ROLLBACK;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<h2 id="6-3-事务四大特性"><a href="#6-3-事务四大特性" class="headerlink" title="6.3 事务四大特性"></a>6.3 事务四大特性</h2><p>原子性（Atomicity）：事务是不可分割的最小操作单元，要么全部成功，要么全部失败。<br>一致性（Consistency）：事务完成时，必须使所有的数据都保持一致状态。<br>隔离性（Isolation）：数据库系统提供的隔离机制，保证事务在不受外部并发操作影响的独立环境下运行。<br>持久性（Durability）：事务一旦提交或回滚，它对数据库中的数据的改变就是永久的。上述就是事务的四大特性，简称ACID。<br><img src="/images/%E4%BA%8B%E5%8A%A1.jpg" alt="事务"></p>
<h2 id="6-4-并发事务问题"><a href="#6-4-并发事务问题" class="headerlink" title="6.4 并发事务问题"></a>6.4 并发事务问题</h2><p>1). 赃读：一个事务读到另外一个事务还没有提交的数据。<br><img src="/images/%E8%B5%83%E8%AF%BB.jpg" alt="赃读"><br>比如B读取到了A未提交的数据。<br>2). 不可重复读：一个事务先后读取同一条记录，但两次读取的数据不同，称之为不可重复读。<br><img src="/images/%E4%B8%8D%E5%8F%AF%E9%87%8D%E5%A4%8D%E8%AF%BB.jpg" alt="不可重复读"><br>事务A两次读取同一条记录，但是读取到的数据却是不一样的。<br>3). 幻读：一个事务按照条件查询数据时，没有对应的数据行，但是在插入数据时，又发现这行数据已经存在，好像出现了 “幻影”。<br><img src="/images/%E5%B9%BB%E8%AF%BB.jpg" alt="幻读"></p>
<h2 id="6-5-事务隔离级别"><a href="#6-5-事务隔离级别" class="headerlink" title="6.5 事务隔离级别"></a>6.5 事务隔离级别</h2><p>为了解决并发事务所引发的问题，在数据库中引入了事务隔离级别。主要有以下几种：</p>
<pre class="line-numbers language-none"><code class="language-none">隔离级别              脏读  不可重复读  幻读
Read uncommitted      √       √       √
Read committed        ×       √       √
Repeatable Read(默认)  ×       ×       √
Serializable          ×       ×       ×<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>1). 查看事务隔离级别</p>
<pre class="line-numbers language-none"><code class="language-none">SELECT @@TRANSACTION_1 ISOLATION;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>2). 设置事务隔离级别</p>
<pre class="line-numbers language-none"><code class="language-none">SET [ SESSION | GLOBAL ] TRANSACTION ISOLATION LEVEL { READ UNCOMMITTED |READ COMMITTED | REPEATABLE READ | SERIALIZABLE }<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>注意：事务隔离级别越高，数据越安全，但是性能越低。</p>
<h1 id="1-存储引擎"><a href="#1-存储引擎" class="headerlink" title="1. 存储引擎"></a>1. 存储引擎</h1><h2 id="1-1-MySQL体系结构"><a href="#1-1-MySQL体系结构" class="headerlink" title="1.1 MySQL体系结构"></a>1.1 MySQL体系结构</h2><p><img src="/images/MySQL%E4%BD%93%E7%B3%BB%E7%BB%93%E6%9E%84.jpg" alt="MySQL体系结构"></p>
<p>1). 连接层<br>最上层是一些客户端和链接服务，包含本地sock 通信和大多数基于客户端/服务端工具实现的类似于TCP/IP的通信。主要完成一些类似于连接处理、授权认证、及相关的安全方案。在该层上引入了线程池的概念，为通过认证安全接入的客户端提供线程。同样在该层上可以实现基于SSL的安全链接。服务器也会为安全接入的每个客户端验证它所具有的操作权限。</p>
<p>2). 服务层<br>第二层架构主要完成大多数的核心服务功能，如SQL接口，并完成缓存的查询，SQL的分析和优化，部分内置函数的执行。所有跨存储引擎的功能也在这一层实现，如 过程、函数等。在该层，服务器会解析查询并创建相应的内部解析树，并对其完成相应的优化如确定表的查询的顺序，是否利用索引等，最后生成相应的执行操作。如果是select语句，服务器还会查询内部的缓存，如果缓存空间足够大，这样在解决大量读操作的环境中能够很好的提升系统的性能。</p>
<p>3). 引擎层<br>存储引擎层， 存储引擎真正的负责了MySQL中数据的存储和提取，服务器通过API和存储引擎进行通信。不同的存储引擎具有不同的功能，这样我们可以根据自己的需要，来选取合适的存储引擎。数据库中的索引是在存储引擎层实现的。</p>
<p>4). 存储层<br>数据存储层， 主要是将数据(如: redolog、undolog、数据、索引、二进制日志、错误日志、查询日志、慢查询日志等)存储在文件系统之上，并完成与存储引擎的交互。</p>
<p>和其他数据库相比，MySQL有点与众不同，它的架构可以在多种不同场景中应用并发挥良好作用。主要体现在存储引擎上，插件式的存储引擎架构，将查询处理和其他的系统任务以及数据的存储提取分离。这种架构可以根据业务的需求和实际需要选择合适的存储引擎。</p>
<h2 id="1-2-存储引擎介绍"><a href="#1-2-存储引擎介绍" class="headerlink" title="1.2 存储引擎介绍"></a>1.2 存储引擎介绍</h2><p>大家可能没有听说过存储引擎，但是一定听过引擎这个词，引擎就是发动机，是一个机器的核心组件。比如，对于舰载机、直升机、火箭来说，他们都有各自的引擎，是他们最为核心的组件。而我们在选择引擎的时候，需要在合适的场景，选择合适的存储引擎，就像在直升机上，我们不能选择舰载机的引擎一样。</p>
<p>而对于存储引擎，也是一样，他是mysql数据库的核心，我们也需要在合适的场景选择合适的存储引擎。接下来就来介绍一下存储引擎。存储引擎就是存储数据、建立索引、更新/查询数据等技术的实现方式 。存储引擎是基于表的，而不是基于库的，所以存储引擎也可被称为表类型。我们可以在创建表的时候，来指定选择的存储引擎，如果没有指定将自动选择默认的存储引擎。</p>
<p>1). 建表时指定存储引擎</p>
<pre class="line-numbers language-none"><code class="language-none">CREATE TABLE 表名(
  字段1 字段1类型 [ COMMENT 字段1注释 ] ,
  ......
  字段n 字段n类型 [COMMENT 字段n注释 ]
) ENGINE = INNODB [ COMMENT 表注释 ] ;<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<p>2). 查询当前数据库支持的存储引擎</p>
<pre class="line-numbers language-none"><code class="language-none">show engines;<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>

<h2 id="1-3-存储引擎特点"><a href="#1-3-存储引擎特点" class="headerlink" title="1.3 存储引擎特点"></a>1.3 存储引擎特点</h2><p>上面我们介绍了什么是存储引擎，以及如何在建表时如何指定存储引擎，接下来我们就来介绍下来上面重点提到的三种存储引擎 InnoDB、MyISAM、Memory的特点。</p>
<h3 id="1-3-1-InnoDB"><a href="#1-3-1-InnoDB" class="headerlink" title="1.3.1 InnoDB"></a>1.3.1 InnoDB</h3><p>1). 介绍<br>InnoDB是一种兼顾高可靠性和高性能的通用存储引擎，在 MySQL 5.5 之后，InnoDB是默认的MySQL 存储引擎。<br>2). 特点<br>  DML操作遵循ACID模型，支持事务；<br>  行级锁，提高并发访问性能；<br>  支持外键FOREIGN KEY约束，保证数据的完整性和正确性；<br>3). 文件<br>xxx.ibd：xxx代表的是表名，innoDB引擎的每张表都会对应这样一个表空间文件，存储该表的表结构（frm-早期的 、sdi-新版的）、数据和索引。</p>
<pre class="line-numbers language-none"><code class="language-none">show variables like 'innodb_1 file_per_table';<span aria-hidden="true" class="line-numbers-rows"><span></span></span></code></pre>
<p>如果该参数开启，代表对于InnoDB引擎的表，每一张表都对应一个ibd文件。 我们直接打开MySQL的数据存放目录： C:\ProgramData\MySQL\MySQL Server 8.0\Data ， 这个目录下有很多文件夹，不同的文件夹代表不同的数据库，我们直接打开itcast文件夹。</p>
<p>可以看到里面有很多的ibd文件，每一个ibd文件就对应一张表，比如：我们有一张表 account，就有这样的一个account.ibd文件，而在这个ibd文件中不仅存放表结构、数据，还会存放该表对应的索引信息。 而该文件是基于二进制存储的，不能直接基于记事本打开，我们可以使用mysql提供的一个指令 ibd2sdi ，通过该指令就可以从ibd文件中提取sdi信息，而sdi数据字典信息中就包含该表的表结构<br><img src="/images/ibd%E6%96%87%E4%BB%B6.jpg" alt="ibd文件"><br>4). 逻辑存储结构<br><img src="/images/%E9%80%BB%E8%BE%91%E5%AD%98%E5%82%A8%E7%BB%93%E6%9E%84.jpg" alt="逻辑存储结构"><br>表空间 : InnoDB存储引擎逻辑结构的最高层，ibd文件其实就是表空间文件，在表空间中可以包含多个Segment段。<br>段 : 表空间是由各个段组成的， 常见的段有数据段、索引段、回滚段等。InnoDB中对于段的管理，都是引擎自身完成，不需要人为对其控制，一个段中包含多个区。<br>区 : 区是表空间的单元结构，每个区的大小为1M。 默认情况下， InnoDB存储引擎页大小为16K， 即一个区中一共有64个连续的页。<br>页 : 页是组成区的最小单元，页也是InnoDB 存储引擎磁盘管理的最小单元，每个页的大小默认为 16KB。为了保证页的连续性，InnoDB 存储引擎每次从磁盘申请 4-5 个区。<br>行 : InnoDB 存储引擎是面向行的，也就是说数据是按行进行存放的，在每一行中除了定义表时所指定的字段以外，还包含两个隐藏字段(后面会详细介绍)。</p>
<h3 id="1-3-2-MyISAM"><a href="#1-3-2-MyISAM" class="headerlink" title="1.3.2 MyISAM"></a>1.3.2 MyISAM</h3><p>1). 介绍<br>MyISAM是MySQL早期的默认存储引擎。<br>2). 特点<br>不支持事务，不支持外键<br>支持表锁，不支持行锁<br>访问速度快<br>3). 文件<br>xxx.sdi：存储表结构信息<br>xxx.MYD: 存储数据<br>xxx.MYI: 存储索引</p>
<h3 id="1-3-3-Memory"><a href="#1-3-3-Memory" class="headerlink" title="1.3.3 Memory"></a>1.3.3 Memory</h3><p>1). 介绍<br>Memory引擎的表数据时存储在内存中的，由于受到硬件问题、或断电问题的影响，只能将这些表作为<br>临时表或缓存使用。<br>2). 特点<br>内存存放<br>hash索引（默认）<br>3).文件<br>xxx.sdi：存储表结构信息</p>
<h3 id="1-3-4-区别及特点"><a href="#1-3-4-区别及特点" class="headerlink" title="1.3.4 区别及特点"></a>1.3.4 区别及特点</h3><pre class="line-numbers language-none"><code class="language-none">特点          InnoDB        MyISAM        Memory
存储限制       64TB           有             有
事务安全       支持            -              -
锁机制         行锁           表锁           表锁
B+tree索引     支持           支持           支持
Hash索引        -             -             支持
全文索引       支持           支持             -
空间使用       高             低              N/A
内存使用       高             低             中等
批量插入速度    低             高             高
支持外键       支持            -              -<span aria-hidden="true" class="line-numbers-rows"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></code></pre>
<h2 id="1-4-存储引擎选择"><a href="#1-4-存储引擎选择" class="headerlink" title="1.4 存储引擎选择"></a>1.4 存储引擎选择</h2><p>在选择存储引擎时，应该根据应用系统的特点选择合适的存储引擎。对于复杂的应用系统，还可以根据实际情况选择多种存储引擎进行组合。<br>  InnoDB: 是Mysql的默认存储引擎，支持事务、外键。如果应用对事务的完整性有比较高的要求，在并发条件下要求数据的一致性，数据操作除了插入和查询之外，还包含很多的更新、删除操作，那么InnoDB存储引擎是比较合适的选择。<br>  MyISAM ： 如果应用是以读操作和插入操作为主，只有很少的更新和删除操作，并且对事务的完整性、并发性要求不是很高，那么选择这个存储引擎是非常合适的。<br>  MEMORY：将所有数据保存在内存中，访问速度快，通常用于临时表及缓存。MEMORY的缺陷就是对表的大小有限制，太大的表无法缓存在内存中，而且无法保障数据的安全性。</p>
<h1 id="2-索引"><a href="#2-索引" class="headerlink" title="2. 索引"></a>2. 索引</h1><h2 id="2-1-索引概述"><a href="#2-1-索引概述" class="headerlink" title="2.1 索引概述"></a>2.1 索引概述</h2><h3 id="2-1-1-介绍"><a href="#2-1-1-介绍" class="headerlink" title="2.1.1 介绍"></a>2.1.1 介绍</h3><p>索引（index）是帮助MySQL高效获取数据的数据结构(有序)。在数据之外，数据库系统还维护着满足特定查找算法的数据结构，这些数据结构以某种方式引用（指向）数据， 这样就可以在这些数据结构上实现高级查找算法，这种数据结构就是索引。<br><img src="/images/%E7%B4%A2%E5%BC%95.jpg" alt="索引"><br>一提到数据结构，大家都会有所担心，担心自己不能理解，跟不上节奏。不过在这里大家完全不用担心，我们后面在讲解时，会详细介绍。</p>

                
            </div>
            <hr/>

            

    <div class="reprint" id="reprint-statement">
        
            <div class="reprint__author">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-user">
                        文章作者:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="/about" rel="external nofollow noreferrer">wb</a>
                </span>
            </div>
            <div class="reprint__type">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-link">
                        文章链接:
                    </i>
                </span>
                <span class="reprint-info">
                    <a href="http://wangbin5920.github.io/2021/05/30/mysql/">http://wangbin5920.github.io/2021/05/30/mysql/</a>
                </span>
            </div>
            <div class="reprint__notice">
                <span class="reprint-meta" style="font-weight: bold;">
                    <i class="fas fa-copyright">
                        版权声明:
                    </i>
                </span>
                <span class="reprint-info">
                    本博客所有文章除特別声明外，均采用
                    <a href="https://creativecommons.org/licenses/by/4.0/deed.zh" rel="external nofollow noreferrer" target="_blank">CC BY 4.0</a>
                    许可协议。转载请注明来源
                    <a href="/about" target="_blank">wb</a>
                    !
                </span>
            </div>
        
    </div>

    <script async defer>
      document.addEventListener("copy", function (e) {
        let toastHTML = '<span>复制成功，请遵循本文的转载规则</span><button class="btn-flat toast-action" onclick="navToReprintStatement()" style="font-size: smaller">查看</a>';
        M.toast({html: toastHTML})
      });

      function navToReprintStatement() {
        $("html, body").animate({scrollTop: $("#reprint-statement").offset().top - 80}, 800);
      }
    </script>



            <div class="tag_share" style="display: block;">
                <div class="post-meta__tag-list" style="display: inline-block;">
                    
                        <div class="article-tag">
                            
                                <a href="/tags/MySQL/">
                                    <span class="chip bg-color">MySQL</span>
                                </a>
                            
                        </div>
                    
                </div>
                <div class="post_share" style="zoom: 80%; width: fit-content; display: inline-block; float: right; margin: -0.15rem 0;">
                    <link rel="stylesheet" type="text/css" href="/libs/share/css/share.min.css">
<div id="article-share">

    
    <div class="social-share" data-sites="twitter,facebook,google,qq,qzone,wechat,weibo,douban,linkedin" data-wechat-qrcode-helper="<p>微信扫一扫即可分享！</p>"></div>
    <script src="/libs/share/js/social-share.min.js"></script>
    

    

</div>

                </div>
            </div>
            
                <style>
    #reward {
        margin: 40px 0;
        text-align: center;
    }

    #reward .reward-link {
        font-size: 1.4rem;
        line-height: 38px;
    }

    #reward .btn-floating:hover {
        box-shadow: 0 6px 12px rgba(0, 0, 0, 0.2), 0 5px 15px rgba(0, 0, 0, 0.2);
    }

    #rewardModal {
        width: 320px;
        height: 350px;
    }

    #rewardModal .reward-title {
        margin: 15px auto;
        padding-bottom: 5px;
    }

    #rewardModal .modal-content {
        padding: 10px;
    }

    #rewardModal .close {
        position: absolute;
        right: 15px;
        top: 15px;
        color: rgba(0, 0, 0, 0.5);
        font-size: 1.3rem;
        line-height: 20px;
        cursor: pointer;
    }

    #rewardModal .close:hover {
        color: #ef5350;
        transform: scale(1.3);
        -moz-transform:scale(1.3);
        -webkit-transform:scale(1.3);
        -o-transform:scale(1.3);
    }

    #rewardModal .reward-tabs {
        margin: 0 auto;
        width: 210px;
    }

    .reward-tabs .tabs {
        height: 38px;
        margin: 10px auto;
        padding-left: 0;
    }

    .reward-content ul {
        padding-left: 0 !important;
    }

    .reward-tabs .tabs .tab {
        height: 38px;
        line-height: 38px;
    }

    .reward-tabs .tab a {
        color: #fff;
        background-color: #ccc;
    }

    .reward-tabs .tab a:hover {
        background-color: #ccc;
        color: #fff;
    }

    .reward-tabs .wechat-tab .active {
        color: #fff !important;
        background-color: #22AB38 !important;
    }

    .reward-tabs .alipay-tab .active {
        color: #fff !important;
        background-color: #019FE8 !important;
    }

    .reward-tabs .reward-img {
        width: 210px;
        height: 210px;
    }
</style>

<div id="reward">
    <a href="#rewardModal" class="reward-link modal-trigger btn-floating btn-medium waves-effect waves-light red">赏</a>

    <!-- Modal Structure -->
    <div id="rewardModal" class="modal">
        <div class="modal-content">
            <a class="close modal-close"><i class="fas fa-times"></i></a>
            <h4 class="reward-title">你的赏识是我前进的动力</h4>
            <div class="reward-content">
                <div class="reward-tabs">
                    <ul class="tabs row">
                        <li class="tab col s6 alipay-tab waves-effect waves-light"><a href="#alipay">支付宝</a></li>
                        <li class="tab col s6 wechat-tab waves-effect waves-light"><a href="#wechat">微 信</a></li>
                    </ul>
                    <div id="alipay">
                        <img src="/medias/reward/alipay.jpg" class="reward-img" alt="支付宝打赏二维码">
                    </div>
                    <div id="wechat">
                        <img src="/medias/reward/wechat.png" class="reward-img" alt="微信打赏二维码">
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(function () {
        $('.tabs').tabs();
    });
</script>

            
        </div>
    </div>

    

    

    

    

    

    

    

    

    

    

<article id="prenext-posts" class="prev-next articles">
    <div class="row article-row">
        
        <div class="article col s12 m6" data-aos="fade-up" data-aos="fade-up">
            <div class="article-badge left-badge text-color">
                <i class="far fa-dot-circle"></i>&nbsp;本篇
            </div>
            <div class="card">
                <a href="/2021/05/30/mysql/">
                    <div class="card-image">
                        
                        <img src="/images/6.jpg" class="responsive-img" alt="MySQL">
                        
                        <span class="card-title">MySQL</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            SQL语言是操作关系型数据库的统一标准。
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-05-30
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/MySQL/" class="post-category">
                                    MySQL
                                </a>
                            
                            
                        </span>
                    </div>
                </div>

                
                <div class="card-action article-tags">
                    
                    <a href="/tags/MySQL/">
                        <span class="chip bg-color">MySQL</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
        
        <div class="article col s12 m6" data-aos="fade-up">
            <div class="article-badge right-badge text-color">
                下一篇&nbsp;<i class="fas fa-chevron-right"></i>
            </div>
            <div class="card">
                <a href="/2021/05/15/java-ji-chu-jia-qiang/">
                    <div class="card-image">
                        
                        <img src="/images/4.jpg" class="responsive-img" alt="java基础加强">
                        
                        <span class="card-title">java基础加强</span>
                    </div>
                </a>
                <div class="card-content article-content">
                    <div class="summary block-with-text">
                        
                            语言：人与人交流沟通的表达方式。 计算机语言：人与计算机之间进行信息交流沟通的一种特殊语言。
                        
                    </div>
                    <div class="publish-info">
                            <span class="publish-date">
                                <i class="far fa-clock fa-fw icon-date"></i>2021-05-15
                            </span>
                        <span class="publish-author">
                            
                            <i class="fas fa-bookmark fa-fw icon-category"></i>
                            
                            <a href="/categories/Java%E5%9F%BA%E7%A1%80%E5%8A%A0%E5%BC%BA/" class="post-category">
                                    Java基础加强
                                </a>
                            
                            
                        </span>
                    </div>
                </div>
                
                <div class="card-action article-tags">
                    
                    <a href="/tags/java%E5%9F%BA%E7%A1%80%E5%8A%A0%E5%BC%BA/">
                        <span class="chip bg-color">java基础加强</span>
                    </a>
                    
                </div>
                
            </div>
        </div>
        
    </div>
</article>

</div>



<!-- 代码块功能依赖 -->
<script type="text/javascript" src="/libs/codeBlock/codeBlockFuction.js"></script>

<!-- 代码语言 -->

<script type="text/javascript" src="/libs/codeBlock/codeLang.js"></script>


<!-- 代码块复制 -->

<script type="text/javascript" src="/libs/codeBlock/codeCopy.js"></script>


<!-- 代码块收缩 -->

<script type="text/javascript" src="/libs/codeBlock/codeShrink.js"></script>


    

</main>




    <footer class="page-footer bg-color">
    
        <link rel="stylesheet" href="/libs/aplayer/APlayer.min.css">
<style>
    .aplayer .aplayer-lrc p {
        
        display: none;
        
        font-size: 12px;
        font-weight: 700;
        line-height: 16px !important;
    }

    .aplayer .aplayer-lrc p.aplayer-lrc-current {
        
        display: none;
        
        font-size: 15px;
        color: #42b983;
    }

    
    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body {
        left: -66px !important;
    }

    .aplayer.aplayer-fixed.aplayer-narrow .aplayer-body:hover {
        left: 0px !important;
    }

    
</style>
<div class="">
    
    <div class="row">
        <meting-js class="col l8 offset-l2 m10 offset-m1 s12"
                   server="netease"
                   type="playlist"
                   id="503838841"
                   fixed='true'
                   autoplay='false'
                   theme='#42b983'
                   loop='all'
                   order='random'
                   preload='auto'
                   volume='0.7'
                   list-folded='true'
        >
        </meting-js>
    </div>
</div>

<script src="/libs/aplayer/APlayer.min.js"></script>
<script src="/libs/aplayer/Meting.min.js"></script>

    

    <div class="container row center-align"
         style="margin-bottom: 15px !important;">
        <div class="col s12 m8 l8 copy-right">
            Copyright&nbsp;&copy;
            
                <span id="year">2021-2022</span>
            
            <a href="/about" target="_blank">wb</a>
            |&nbsp;Powered by&nbsp;<a href="https://hexo.io/" target="_blank">Hexo</a>
            |&nbsp;Theme&nbsp;<a href="https://github.com/blinkfox/hexo-theme-matery" target="_blank">Matery</a>
            <br>
            
                &nbsp;<i class="fas fa-chart-area"></i>&nbsp;站点总字数:&nbsp;<span
                        class="white-color">119.5k</span>
            
            
            
                
            
            
                <span id="busuanzi_container_site_pv">
                &nbsp;|&nbsp;<i class="far fa-eye"></i>&nbsp;总访问量:&nbsp;
                    <span id="busuanzi_value_site_pv" class="white-color"></span>
            </span>
            
            
                <span id="busuanzi_container_site_uv">
                &nbsp;|&nbsp;<i class="fas fa-users"></i>&nbsp;总访问人数:&nbsp;
                    <span id="busuanzi_value_site_uv" class="white-color"></span>
            </span>
            
            <br>

            <!-- 运行天数提醒. -->
            
                <span id="sitetime"> Loading ...</span>
                <script>
                    var calcSiteTime = function () {
                        var seconds = 1000;
                        var minutes = seconds * 60;
                        var hours = minutes * 60;
                        var days = hours * 24;
                        var years = days * 365;
                        var today = new Date();
                        var startYear = "2021";
                        var startMonth = "3";
                        var startDate = "15";
                        var startHour = "0";
                        var startMinute = "0";
                        var startSecond = "0";
                        var todayYear = today.getFullYear();
                        var todayMonth = today.getMonth() + 1;
                        var todayDate = today.getDate();
                        var todayHour = today.getHours();
                        var todayMinute = today.getMinutes();
                        var todaySecond = today.getSeconds();
                        var t1 = Date.UTC(startYear, startMonth, startDate, startHour, startMinute, startSecond);
                        var t2 = Date.UTC(todayYear, todayMonth, todayDate, todayHour, todayMinute, todaySecond);
                        var diff = t2 - t1;
                        var diffYears = Math.floor(diff / years);
                        var diffDays = Math.floor((diff / days) - diffYears * 365);

                        // 区分是否有年份.
                        var language = 'zh-CN';
                        if (startYear === String(todayYear)) {
                            document.getElementById("year").innerHTML = todayYear;
                            var daysTip = 'This site has been running for ' + diffDays + ' days';
                            if (language === 'zh-CN') {
                                daysTip = '本站已运行 ' + diffDays + ' 天';
                            } else if (language === 'zh-HK') {
                                daysTip = '本站已運行 ' + diffDays + ' 天';
                            }
                            document.getElementById("sitetime").innerHTML = daysTip;
                        } else {
                            document.getElementById("year").innerHTML = startYear + " - " + todayYear;
                            var yearsAndDaysTip = 'This site has been running for ' + diffYears + ' years and '
                                + diffDays + ' days';
                            if (language === 'zh-CN') {
                                yearsAndDaysTip = '本站已运行 ' + diffYears + ' 年 ' + diffDays + ' 天';
                            } else if (language === 'zh-HK') {
                                yearsAndDaysTip = '本站已運行 ' + diffYears + ' 年 ' + diffDays + ' 天';
                            }
                            document.getElementById("sitetime").innerHTML = yearsAndDaysTip;
                        }
                    }

                    calcSiteTime();
                </script>
            
            <br>
            
        </div>
        <div class="col s12 m4 l4 social-link social-statis">
    <a href="https://github.com/wangbin5920" class="tooltipped" target="_blank" data-tooltip="访问我的GitHub" data-position="top" data-delay="50">
        <i class="fab fa-github"></i>
    </a>



    <a href="mailto:375314196@qq.com" class="tooltipped" target="_blank" data-tooltip="邮件联系我" data-position="top" data-delay="50">
        <i class="fas fa-envelope-open"></i>
    </a>







    <a href="tencent://AddContact/?fromId=50&fromSubId=1&subcmd=all&uin=375314196" class="tooltipped" target="_blank" data-tooltip="QQ联系我: 375314196" data-position="top" data-delay="50">
        <i class="fab fa-qq"></i>
    </a>







</div>
    </div>
</footer>

<div class="progress-bar"></div>


    <!-- 搜索遮罩框 -->
<div id="searchModal" class="modal">
    <div class="modal-content">
        <div class="search-header">
            <span class="title"><i class="fas fa-search"></i>&nbsp;&nbsp;搜索</span>
            <input type="search" id="searchInput" name="s" placeholder="请输入搜索的关键字"
                   class="search-input">
        </div>
        <div id="searchResult"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    var searchFunc = function (path, search_id, content_id) {
        'use strict';
        $.ajax({
            url: path,
            dataType: "xml",
            success: function (xmlResponse) {
                // get the contents from search data
                var datas = $("entry", xmlResponse).map(function () {
                    return {
                        title: $("title", this).text(),
                        content: $("content", this).text(),
                        url: $("url", this).text()
                    };
                }).get();
                var $input = document.getElementById(search_id);
                var $resultContent = document.getElementById(content_id);
                $input.addEventListener('input', function () {
                    var str = '<ul class=\"search-result-list\">';
                    var keywords = this.value.trim().toLowerCase().split(/[\s\-]+/);
                    $resultContent.innerHTML = "";
                    if (this.value.trim().length <= 0) {
                        return;
                    }
                    // perform local searching
                    datas.forEach(function (data) {
                        var isMatch = true;
                        var data_title = data.title.trim().toLowerCase();
                        var data_content = data.content.trim().replace(/<[^>]+>/g, "").toLowerCase();
                        var data_url = data.url;
                        data_url = data_url.indexOf('/') === 0 ? data.url : '/' + data_url;
                        var index_title = -1;
                        var index_content = -1;
                        var first_occur = -1;
                        // only match artiles with not empty titles and contents
                        if (data_title !== '' && data_content !== '') {
                            keywords.forEach(function (keyword, i) {
                                index_title = data_title.indexOf(keyword);
                                index_content = data_content.indexOf(keyword);
                                if (index_title < 0 && index_content < 0) {
                                    isMatch = false;
                                } else {
                                    if (index_content < 0) {
                                        index_content = 0;
                                    }
                                    if (i === 0) {
                                        first_occur = index_content;
                                    }
                                }
                            });
                        }
                        // show search results
                        if (isMatch) {
                            str += "<li><a href='" + data_url + "' class='search-result-title'>" + data_title + "</a>";
                            var content = data.content.trim().replace(/<[^>]+>/g, "");
                            if (first_occur >= 0) {
                                // cut out 100 characters
                                var start = first_occur - 20;
                                var end = first_occur + 80;
                                if (start < 0) {
                                    start = 0;
                                }
                                if (start === 0) {
                                    end = 100;
                                }
                                if (end > content.length) {
                                    end = content.length;
                                }
                                var match_content = content.substr(start, end);
                                // highlight all keywords
                                keywords.forEach(function (keyword) {
                                    var regS = new RegExp(keyword, "gi");
                                    match_content = match_content.replace(regS, "<em class=\"search-keyword\">" + keyword + "</em>");
                                });

                                str += "<p class=\"search-result\">" + match_content + "...</p>"
                            }
                            str += "</li>";
                        }
                    });
                    str += "</ul>";
                    $resultContent.innerHTML = str;
                });
            }
        });
    };

    searchFunc('/search.xml', 'searchInput', 'searchResult');
});
</script>

    <!-- 回到顶部按钮 -->
<div id="backTop" class="top-scroll">
    <a class="btn-floating btn-large waves-effect waves-light" href="#!">
        <i class="fas fa-arrow-up"></i>
    </a>
</div>


    <script src="/libs/materialize/materialize.min.js"></script>
    <script src="/libs/masonry/masonry.pkgd.min.js"></script>
    <script src="/libs/aos/aos.js"></script>
    <script src="/libs/scrollprogress/scrollProgress.min.js"></script>
    <script src="/libs/lightGallery/js/lightgallery-all.min.js"></script>
    <script src="/js/matery.js"></script>

    

    

    <!-- 雪花特效 -->
    

    <!-- 鼠标星星特效 -->
    

     
        <script src="https://ssl.captcha.qq.com/TCaptcha.js"></script>
        <script src="/libs/others/TencentCaptcha.js"></script>
        <button id="TencentCaptcha" data-appid="xxxxxxxxxx" data-cbfn="callback" type="button" hidden></button>
    

    <!-- Baidu Analytics -->

    <!-- Baidu Push -->

<script>
    (function () {
        var bp = document.createElement('script');
        var curProtocol = window.location.protocol.split(':')[0];
        if (curProtocol === 'https') {
            bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
        } else {
            bp.src = 'http://push.zhanzhang.baidu.com/push.js';
        }
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(bp, s);
    })();
</script>

    
    <script src="/libs/others/clicklove.js" async="async"></script>
    
    
    <script async src="/libs/others/busuanzi.pure.mini.js"></script>
    

    

    

    <!--腾讯兔小巢-->
    
    

    

    

    
    <script src="/libs/instantpage/instantpage.js" type="module"></script>
    

</body>

</html>
